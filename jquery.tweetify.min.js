(function(d){d.fn.extend({tweetify:function(i){var g={baseurl:"http://twitter.com/share",buttonClass:"twitter-share-button",scriptTag:'<script type="text/javascript" src="http://platform.twitter.com/widgets.js"><\/script>',attrs:["url","via","text","related","count","lang","counturl","extension"]};i=d.extend({},d.fn.tweetify.defaults,i);var k=false;this.each(function(){var e=d(this),l=i,m=l.queries,c={};d.each(g.attrs,function(b,a){c[a]=typeof e.data(a)!=="undefined"?e.data(a):typeof m[a]!=="undefined"?
m[a]:""});var f=false;if(c.url==""){f=window.location.href;f=encodeURIComponent(f);c.url=f;f=true}if(c.extension){if(!f)c.url=encodeURIComponent(c.url);c.url+=encodeURIComponent(c.extension)}if(l.customButton){var h="";d.each(c,function(b,a){if(a&&b!="extension")h+="&"+b+"="+a});h=h.replace(/^&/,"?");e.attr("href",g.baseurl+h).bind("click",function(b){var a=document.height/2-225,j=document.width/2-275;b.preventDefault();window.open(this.href,"_blank","height=450,width=550,top="+a+",left="+j)})}else{d.each(c,
function(b,a){if(b=="url"&&typeof e.data(b)==="undefined"){var j=decodeURIComponent(a);e.attr("data-"+b,j)}else a&&b!="extension"&&typeof e.data(b)==="undefined"&&e.attr("data-"+b,a)});e.addClass(g.buttonClass);k=true}});k&&d("body").append(g.scriptTag);return this}});d.fn.tweetify.defaults={queries:{url:"",via:"",text:"",related:"",count:"none",lang:"",counturl:""},customButton:false}})(jQuery);
